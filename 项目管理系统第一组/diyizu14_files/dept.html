
<!-- saved from url=(0030)http://www.1316hr.com/org/dept -->
<html class="panel-fit"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>部门管理</title>
    



<!-- easyui 主题 -->
<link rel="stylesheet" href="./easyui.css">
<!-- easyui 图标 -->
<link rel="stylesheet" href="./icon.css">
<link rel="stylesheet" href="./icons.css">
<link rel="stylesheet" href="./icon-standard.css">
<!-- JQuery -->
<script type="text/javascript" src="./jquery.min(1).js"></script>
<!-- easyui -->
<script type="text/javascript" src="./jquery.easyui.min.js"></script>
<script type="text/javascript" src="./easyui-lang-zh_CN.js"></script>
<!-- easyui扩展JS -->
<script type="text/javascript" src="./easyui-util.js"></script>

<script type="text/javascript" src="./util.js"></script>

<script>
    window.ctx = "";
</script>
<style>
    td{
        font-size: 12px;
        height: 18px;
        line-height: 18px;
        margin: 0;
        overflow: hidden;
        padding: 0 4px;
        white-space: nowrap;
        word-wrap: normal;
    }
</style>






    <script>
        var dept_datagrid;
        $(function(){
            dept_datagrid = $("#dept_datagrid");
            dept_datagrid.datagrid({
                fit: true, //表格宽高自适应
//                border: false, //不显示边框
                striped: true, //表格隔行变色
                rownumbers: true, //显示行号
                fitColumns: true, //列宽度自适应
                singleSelect: true,//只允许选择一行
                url: window.ctx + '/dept/datagrid', //加载表格数据的url
                idField: 'id', //主键字段
                sortName: 'id',
                sortOrder: 'desc',
                loadMsg: '数据正在加载,请稍后...', //ajax加载时的提示信息
                columns: [
                    [
                        {
                            field: 'id',
                            title: '编号',
                            hidden: true
                        },
                        {
                            field: 'orgId',
                            title: '企业编号',
                            hidden: true
                        },
                        {
                            sortable: true,
                            field: 'name',
                            title: '名称',
                            width: 100
                        }]
                ],
                toolbar: [
                    { //工具条
                        text: '添加',
                        iconCls: 'icon-standard-vcard-add',
                        handler: dept_datagrid_add
                    },
                    '-',
                    {
                        text: '修改',
                        iconCls: 'icon-standard-vcard-edit',
                        handler: dept_datagrid_update
                    },
                    '-',
                    {
                        text: '删除',
                        iconCls: 'icon-standard-find',
                        handler: dept_datagrid_delete
                    }
                ],  //右键菜单事件
                onRowContextMenu: function (e, rowIndex, rowData) {
                    e.preventDefault(); //禁止事件冒泡，取消浏览器自带右键菜单。
                    if(rowIndex == -1) return;  //当在表格上右键才显示右键菜单
                    dept_datagrid.datagrid("selectRow", rowIndex);//选中当前右击行
                    //初始化右键菜单
                    $("#dept_menu").menu({
                        onClick: function (item) {
                            var type = item.text;
                            switch (type) {
                                case "添加":
                                    dept_datagrid_add();
                                    break;
                                case "修改":
                                    dept_datagrid_update();
                                    break;
                                case "删除":
                                    dept_datagrid_delete();
                                    break;
                            }
                        }
                    }).menu('show', {   //显示右键菜单
                        left: e.pageX,  //菜单显示的x坐标
                        top: e.pageY    //菜单显示的Y坐标
                    });
                }
            });
        });
        function dept_datagrid_add() {
            $.messager.prompt('添加部门', '请输入部门名称:', function(r){
                if (r){
                    $.post(window.ctx + "/dept/save",{name: r},function(data){
                        defaultResultHolder(data,dept_datagrid);
                    },"json");
                }else if(r == ''){
                    dept_datagrid_add();
                }
            });
        }
        function dept_datagrid_update() {
            var selected = dept_datagrid.datagrid("getSelected");
            if(selected){
                $.messager.prompt('修改部门', '请输入部门名称:', function(r){
                    if (r){
                        selected.name = r;
                        $.post(window.ctx + "/dept/save",selected,function(data){
                            defaultResultHolder(data,dept_datagrid);
                        },"json");
                    }else if(r == ''){
                        dept_datagrid_update();
                    }
                });
            }else {
                $.messager.show({
                    title: '提示',
                    msg: "请选择要修改的部门...",
                    timeout: 2000
                });
            }
        }
        function dept_datagrid_delete() {
            var selected = dept_datagrid.datagrid("getSelected");
            if(selected){
                $.messager.confirm('此操作不可恢复', '您确认要删除这个部门么？', function(r){
                    if (r){
                        $.post(window.ctx + "/dept/delete/" + selected.id,function(data){
                            defaultResultHolder(data,dept_datagrid);
                        },"json");
                    }
                });
            }else {
                $.messager.show({
                    title: '提示',
                    msg: "请选择要删除的部门...",
                    timeout: 2000
                });
            }
        }
    </script>
</head>
<body class="panel-noscroll">

<div class="panel datagrid easyui-fluid" style="width: 1660px;"><div class="datagrid-wrap panel-body panel-body-noheader" title="" style="width: 1658px; height: 811px;"><div class="datagrid-toolbar"><table cellspacing="0" cellpadding="0"><tbody><tr><td><a href="javascript:void(0)" class="l-btn l-btn-small l-btn-plain" group="" id=""><span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">添加</span><span class="l-btn-icon icon-standard-vcard-add">&nbsp;</span></span></a></td><td><div class="datagrid-btn-separator"></div></td><td><a href="javascript:void(0)" class="l-btn l-btn-small l-btn-plain" group="" id=""><span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">修改</span><span class="l-btn-icon icon-standard-vcard-edit">&nbsp;</span></span></a></td><td><div class="datagrid-btn-separator"></div></td><td><a href="javascript:void(0)" class="l-btn l-btn-small l-btn-plain" group="" id=""><span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">删除</span><span class="l-btn-icon icon-standard-find">&nbsp;</span></span></a></td></tr></tbody></table></div><div class="datagrid-view" style="width: 1658px; height: 780px;"><div class="datagrid-view1" style="width: 31px;"><div class="datagrid-header" style="width: 31px; height: 24px;"><div class="datagrid-header-inner" style="display: block;"><table class="datagrid-htable" border="0" cellspacing="0" cellpadding="0" style="height: 25px;"><tbody><tr class="datagrid-header-row"><td rowspan="0"><div class="datagrid-header-rownumber"></div></td></tr></tbody></table></div></div><div class="datagrid-body" style="width: 31px; margin-top: 0px; height: 755px;"><div class="datagrid-body-inner"><table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody></tbody></table></div></div><div class="datagrid-footer" style="width: 31px;"><div class="datagrid-footer-inner" style="display: none;"></div></div></div><div class="datagrid-view2" style="width: 1627px;"><div class="datagrid-header" style="width: 1627px; height: 24px;"><div class="datagrid-header-inner" style="display: block;"><table class="datagrid-htable" border="0" cellspacing="0" cellpadding="0" style="height: 25px;"><tbody><tr class="datagrid-header-row"><td field="id" style="display: none;"><div class="datagrid-cell datagrid-sort-desc datagrid-cell-c1-id"><span>编号</span><span class="datagrid-sort-icon">&nbsp;</span></div></td><td field="orgId" style="display: none;"><div class="datagrid-cell datagrid-cell-c1-orgId"><span>企业编号</span><span class="datagrid-sort-icon">&nbsp;</span></div></td><td field="name" class=""><div class="datagrid-cell datagrid-sort datagrid-cell-c1-name" style=""><span>名称</span><span class="datagrid-sort-icon">&nbsp;</span></div></td></tr></tbody></table></div></div><div class="datagrid-body" style="width: 1627px; margin-top: 0px; height: 755px; overflow-x: hidden;"><table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody><tr id="datagrid-row-r1-2-0" class="" style="height: 1px; border-color: transparent; background: transparent;"><td field="id" style="display: none; height: 1px; border-color: transparent; background: transparent;"><div style="height: 1px; border-color: transparent; background: transparent;" class="datagrid-cell datagrid-cell-c1-id"></div></td><td field="orgId" style="display: none; height: 1px; border-color: transparent; background: transparent;"><div style="height: 1px; border-color: transparent; background: transparent;" class="datagrid-cell datagrid-cell-c1-orgId"></div></td><td field="name" style="height: 1px; border-color: transparent; background: transparent;"><div style="height: 1px; border-color: transparent; background: transparent;" class="datagrid-cell datagrid-cell-c1-name"></div></td></tr></tbody></table></div><div class="datagrid-footer" style="width: 1627px;"><div class="datagrid-footer-inner" style="display: none;"></div></div></div><table id="dept_datagrid" class="datagrid-f" style="display: none;"></table><style type="text/css" easyui="true">
.datagrid-cell-c1-id{width:auto}
.datagrid-cell-c1-orgId{width:auto}
.datagrid-cell-c1-name{width:91px}
</style></div></div></div>

<div id="dept_menu" style="width: 120px; display: none;">
    <div data-options="iconCls:&#39;icon-standard-vcard-add&#39;">添加</div>
    <div class="menu-sep"></div>
    <div data-options="iconCls:&#39;icon-standard-vcard-edit&#39;">修改</div>
    <div class="menu-sep"></div>
    <div data-options="iconCls:&#39;icon-standard-zoom&#39;">删除</div>
</div>



</body></html>